<!DOCTYPE html>
<html lang="en">
<head>
        <title>An</title>
        <!-- Fonts -->
        <link href='http://fonts.googleapis.com/css?family=Inconsolata' rel='stylesheet' type='text/css'>
        <link href='http://fonts.googleapis.com/css?family=The+Girl+Next+Door' rel='stylesheet' type='text/css'>
        <link href='http://fonts.googleapis.com/css?family=Marcellus' rel='stylesheet' type='text/css'>
        
        <!-- CSS -->
        <link rel="stylesheet" href="http://www.dephiros.com/theme/css/main.css" type="text/css" />
        <link rel="stylesheet" href="http://www.dephiros.com/theme/css/pygments.css" type="text/css" />
        <link rel="stylesheet" href="http://www.dephiros.com/theme/css/font-awesome.css" type="text/css" />
        <meta charset="utf-8" />
      
        <link href="http://www.dephiros.com/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="An RSS Feed" />

        <!-- Javascript-->
        <script async src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
        <script async type="text/javascript"> 
        $(function() {
            function invisibleMenu() {
                var now = 0;
                var pixels = 300;
                var opacity = -1;

                var move = function() {
                    now = $(window).scrollTop();
                    if (now > pixels && opacity !== 0)
                        opacity = 0;
                    else if (now < pixels){
                        // Depends on the position not if scrolls down or up
                        opacity = (1 - now/pixels);
                    }
                    $("div.navigation").css({"opacity": opacity});
                }
                $(window).scroll(move);
                move();
            }
            invisibleMenu();
          });
          </script> 
</head>

<body id="index" class="home">
     <div class="navigation">
        <ol class="nav">
          <li class="current"><a href="http://www.dephiros.com">Blog</a> </li>
          <li><a href="http://www.dephiros.com/archives.html">Archive</a></li>
          <li><a href="http://www.dephiros.com/tags.html">Tags</a> </li>
          <li><a href="feeds/all.rss.xml">RSS</a> </li>
        </ol>
      </div>
        <header id="banner" class="body">
                <div class="banner"><a href="http://www.dephiros.com">An <strong></strong></a></div>
        </header><!-- /#banner -->
        <nav id="menu"><ul>
        </ul></nav><!-- /#menu -->
        <div class="box">
<section id="content" class="body">
  <header class="post">
    <h1 class="entry-title">
      Arch Linux Installation on Vaio Pro 13
    </h1>
  </header>
  <footer class="post-info">
    <abbr>
      Mon 17 March 2014 
         By <a class="url fn" href="http://www.dephiros.com/author/an-nguyen.html">An Nguyen</a>
  
    </abbr>
  </footer><!-- /.post-info -->
  <div class="entry-content">
    <h1>(SVP1321BPXB) -- In Progress</h1>
<p>I am very much a newbie in Arch and have only some experience with Linux. This guide only serves as a log so I can repeat later if needed. If it helps anybody then that's even more awesome.</p>
<h2>System</h2>
<h3>Systemd user</h3>
<p>Follow the instruction <a href="https://wiki.archlinux.org/index.php/Systemd/User#Using_.2Fusr.2Flib.2Fsystemd.2Fsystemd_--user_To_Manage_Your_Session">here</a> to set up systemd for user that is later needed to start dropbox daemon when login to certain user.</p>
<h4>Create a systemd service for current user</h4>
<p>Follow the instruction <a href="https://wiki.archlinux.org/index.php/Dropbox#Run_as_daemon_with_systemd">here</a></p>
<p>I modified "After=xorg.target" to "After=local-fs.target network.target"
"ExecStart=/home/your_user/.dropbox-dist/dropbox" to "ExecStart=/home/andy/bin/dropbox start". I think this will eliminate the need for starting graphical interface before starting dropbox.</p>
<h3>Automount</h3>
<h3>Mounting NTFS</h3>
<p>I got some error when trying to mount My Passport formated in NTFS. Apparently, Arch does not support NTFS out of the box</p>
<div class="highlight"><pre><span class="n">sudo</span> <span class="n">mount</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sdb</span> <span class="o">/</span><span class="n">mnt</span><span class="o">/</span><span class="n">Passport</span>
<span class="nl">mount:</span> <span class="n">wrong</span> <span class="n">fs</span> <span class="n">type</span><span class="p">,</span> <span class="n">bad</span> <span class="n">option</span><span class="p">,</span> <span class="n">bad</span> <span class="n">superblock</span> <span class="n">on</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sdb</span><span class="p">,</span>
   <span class="n">missing</span> <span class="n">codepage</span> <span class="n">or</span> <span class="n">helper</span> <span class="n">program</span><span class="p">,</span> <span class="n">or</span> <span class="n">other</span> <span class="n">error</span>

   <span class="n">In</span> <span class="n">some</span> <span class="n">cases</span> <span class="n">useful</span> <span class="n">info</span> <span class="n">is</span> <span class="n">found</span> <span class="n">in</span> <span class="n">syslog</span> <span class="o">-</span> <span class="n">try</span>
   <span class="n">dmesg</span> <span class="o">|</span> <span class="n">tail</span> <span class="n">or</span> <span class="n">so</span><span class="p">.</span>
</pre></div>


<p>I got the same error trying to force type with -t option. lsblk -f recognize the filesystem as NTFS. Of course I made the silly mistake of putting /dev/sdb instead of /dev/sdb1 too.</p>
<h4>Install ntfs-3g</h4>
<div class="highlight"><pre> <span class="n">sudo</span> <span class="n">pacman</span> <span class="o">-</span><span class="n">S</span> <span class="n">ntfs</span><span class="o">-</span><span class="mi">3</span><span class="n">g</span>
</pre></div>


<p>Now the mounting with command is successful.Apparently I did not safely close the passport on Windows.</p>
<div class="highlight"><pre><span class="n">sudo</span> <span class="n">mount</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sdb1</span> <span class="o">/</span><span class="n">mnt</span><span class="o">/</span><span class="n">Passport</span>

<span class="n">The</span> <span class="n">disk</span> <span class="n">contains</span> <span class="n">an</span> <span class="n">unclean</span> <span class="n">file</span> <span class="n">system</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">).</span>
<span class="n">The</span> <span class="n">file</span> <span class="n">system</span> <span class="n">wasn</span><span class="err">&#39;</span><span class="n">t</span> <span class="n">safely</span> <span class="n">closed</span> <span class="n">on</span> <span class="n">Windows</span><span class="p">.</span> <span class="n">Fixing</span><span class="p">.</span>
</pre></div>


<h3>Audio</h3>
<p>I have to install alsa-util, pulseaudio, pavucontrol. After fiddling with pavucontrol to select the right output, got audio to work.</p>
<h3>udev(automatic mounting, battery)</h3>
<p>Built to systemctl by default in Arch</p>
<h4>Automount</h4>
<p>Install gvfs and polkit with authentication agent as mentioned <a href="https://wiki.archlinux.org/index.php/Polkit#Authentication_agents">here</a> (for mount without password)</p>
<h2>Appearance</h2>
<h3>Console font</h3>
<p>The console font was way too small for me. So I followed the instruction on arch wiki. This is a summary</p>
<div class="highlight"><pre><span class="n">sudo</span> <span class="n">pacman</span> <span class="o">-</span><span class="n">S</span> <span class="n">terminus</span><span class="o">-</span><span class="n">font</span>
</pre></div>


<p>Then change the font by change FONT variable in /etc/vconsole.conf(create if not exist)
     FONT=ter-128b
More terminus font can be found at /usr/share/fonts/local/ </p>
<h2>Application</h2>
<p>I am very nicely surprised that installing emacs24 go much smoother than in Debian. No adding third-party repo. And pacman rocks</p>
<h3>dmenu-xft(from AUR)</h3>
<p>Can also install dmenu in Official Repository but does not support xft font</p>
<p>Create a file in PATH named launch_dmenu with contents</p>
<div class="highlight"><pre>   <span class="err">#</span><span class="o">!/</span><span class="n">bin</span><span class="o">/</span><span class="n">sh</span>
   <span class="n">exec</span> <span class="err">$</span><span class="p">(</span><span class="n">dmenu_path</span> <span class="o">|</span> <span class="n">dmenu_run</span> <span class="o">-</span><span class="n">b</span> <span class="o">-</span><span class="n">nb</span> <span class="err">&#39;#</span><span class="mi">202930</span><span class="err">&#39;</span> <span class="o">-</span><span class="n">sb</span> <span class="err">&#39;#</span><span class="mi">285481</span><span class="err">&#39;</span> <span class="o">-</span><span class="n">sf</span> <span class="err">&#39;#</span><span class="n">FFFFFF</span><span class="err">&#39;</span> <span class="o">-</span><span class="n">fn</span> <span class="err">&#39;</span><span class="n">Droid</span> <span class="n">Sans</span> <span class="n">Mono</span><span class="o">-</span><span class="mi">16</span><span class="err">&#39;</span><span class="p">)</span>
</pre></div>


<p>Using Droid Sans Georgian makes dmenu shows all boxes for some reasons</p>
<h3>Openbox or xfce</h3>
<h4>openbox</h4>
<h5>obconf, obmenu, conky, lxappearance</h5>
<p>In lxapperance I set default font to Droid Sans Georgian 16</p>
<p>In obconf set Theme to Artwiz-boxed; set font under Appearance to Droid Sans Georgian (bold/Italic depending item; window title 14, the rest 16)</p>
<h5>Desktop panel - tin2</h5>
<p>Start by running tin2</p>
<p>Add to ~/.config/openbox/autostart</p>
<div class="highlight"><pre><span class="n">tint2</span> <span class="o">&amp;</span>
</pre></div>


<p>Create a keyboard shortcut entry in openbox ~/.config/openbox/rc.xml. If file does not exist, initialize the file with /etc/xdg/openbox. Add this entry under <keyboard> <!-- Keybindings for running applications -->. Google openbox keyboard for detail about binding.</p>
<div class="highlight"><pre><span class="nt">&lt;keybind</span> <span class="na">key=</span><span class="s">&quot;W-space&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;action</span> <span class="na">name=</span><span class="s">&quot;execute&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;execute&gt;</span>/home/andy/bin/launch_dmenu<span class="nt">&lt;/execute&gt;</span>
  <span class="nt">&lt;/action&gt;</span>
<span class="nt">&lt;/keybind&gt;</span>
</pre></div>


<h4>xfce</h4>
<p>Keyboard shortcut can be bound  through xfce keyboard app.</p>
<h3>rsync, p7zip(for handling archive file) emacs thunar</h3>
<h3>flashplugin chromium firefox</h3>
<p>Even after installing flashplugin(need to login to openbox again), youtube plays in chromium but not firefox(give me error after 1-2 second of playing), google music stucks at 0 and pandora switches song continuously. I am guessing it has something to do with flash</p>
<h3>hal</h3>
<p>Installing hal-flash(smaller) only enable playing google play movie</p>
<h3>Dropbox</h3>
<p>I installed dropbox by downloading tar ball from here <a href="https://aur.archlinux.org/packages/dropbox/">link</a></p>
<p>Then follow the isntruction for <a href="https://wiki.archlinux.org/index.php/Arch_User_Repository#Installing_packages">installing package from AUR</a></p>
<p>Do the same thing for thunar-dropbox for thunar support</p>
<p>I donwload the cli from <a href="https://www.dropbox.com/download?dl=packages/dropbox.py">dropbox page</a> since AUR is out-of-date. I put dropbox.py in my path. Then run to enable execute perm:</p>
<p>chmod +x dropbox.py</p>
<p>Arch apparently comes with python3 by default so I have to edit the shebang line in dropbox.py from "#!/usr/bin/python" to "#!/usr/bin/python2" and rename the file to dropbox for convenience. type dropbox will run ok at this point.</p>
<p>After this, i tried to type dropboxd in the terminal but nothing happens. I tried relogin to openbox but still nothing. So I try dropbox start and the login window finally popped up.</p>
<h3>git and openssh</h3>
<p>Use this <a href="https://help.github.com/articles/set-up-git">guide</a> to set up git</p>
<div class="highlight"><pre><span class="n">git</span> <span class="n">config</span> <span class="o">--</span><span class="n">global</span> <span class="n">user</span><span class="p">.</span><span class="n">name</span> <span class="s">&quot;Your Name Here&quot;</span>
<span class="cp"># Sets the default name for git to use when you commit</span>
<span class="n">git</span> <span class="n">config</span> <span class="o">--</span><span class="n">global</span> <span class="n">user</span><span class="p">.</span><span class="n">email</span> <span class="s">&quot;your_email@example.com&quot;</span>
<span class="cp"># Sets the default email for git to use when you commit</span>
<span class="n">git</span> <span class="n">config</span> <span class="o">--</span><span class="n">global</span> <span class="n">credential</span><span class="p">.</span><span class="n">helper</span> <span class="err">&#39;</span><span class="n">cache</span> <span class="o">--</span><span class="n">timeout</span><span class="o">=</span><span class="mi">3600</span><span class="err">&#39;</span>
<span class="cp"># Set the cache to timeout after 1 hour (setting is in seconds)</span>
</pre></div>


<p>Install openssh to set up <a href="https://help.github.com/articles/generating-ssh-keys">ssh-key</a></p>
<h3>Installing lyx livetex-most</h3>
<h3>Java Intellij android-sdk android-skd-build-tools android-sdk-platform-tools</h3>
<p>All android stuffs can be found in AUR(this way it will take care of all 32bit dependency comparing to getting from Google directly)</p>
<p>Oracle java can be found in AUR (jdk)</p>
<p>After installing by following AUR wiki instruction(with makepkg -s and pacman -U), set java path by putting the following in .bashrc.</p>
<div class="highlight"><pre>  <span class="n">export</span> <span class="n">PATH</span><span class="o">=</span><span class="err">$</span><span class="n">PATH</span><span class="o">:</span><span class="err">$</span><span class="n">JAVA_HOME</span><span class="o">/</span><span class="n">bin</span>
  <span class="err">##</span> <span class="n">export</span> <span class="n">JAVA_HOME</span> <span class="n">JDK</span> <span class="err">##</span>
  <span class="n">export</span> <span class="n">JAVA_HOME</span><span class="o">=</span><span class="s">&quot;/opt/java/&quot;</span>
</pre></div>


<p>Intellij is available in community repository(woo-hoo) and can be installed by installing. Somehow running idea.sh in dmenu does not do anything so I created a bash file named "idea" in my path.</p>
<h3>pdf reader</h3>
<p>I choose okular - hefty with KDE but still the best. It is kdegraphics-okular package in arch repository.</p>
<h3>libreoffice</h3>
<h3>yaourt (for easy access to AUR)</h3>
<h3>python3 pip pelican</h3>
<p>Install python-pip then follow instruction from here to <a href="http://docs.getpelican.com/en/3.1.1/getting_started.html">install pelican</a></p>
<p>Use pip to install markdown and virtualenvwrapper</p>
  </div><!-- /.entry-content -->
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'XXXXXXXXXX'; 

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>
            <hr/>
            <footer id="contentinfo" class="footer">
                <div>
                    <a href="http://www.dephiros.com">An Nguyen</a> (2012)
                </div>
                <div>
                    This work is licensed under <a rel="license" href="http://opensource.org/licenses/bsd-3-clause">3 clause BSD</a>. Source code available on <a rel="source code" href="https://github.com/slok/blog">Github</a>
                </div>
                <div>
                    powered by <a href="http://getpelican.com/">Pelican</a>
                    and <a href="http://python.org">Python</a>. 
                    <a href="http://github.com/slok/iris">Theme</a> by <a href="http://xlarrakoetxea.org">Xabier Larrakoetxea</a> based on <a href="http://flask.pocoo.org/">Flask</a> theme
                </div>
                <div>
                    Social icons (font awesome) by <a href="http://fortawesome.github.com/Font-Awesome/"> fort awesome</a>.
                    <a href="http://www.google.com/webfonts/specimen/The+Girl+Next+Door">Title</a>, <a href="http://www.google.com/webfonts/specimen/Marcellus">headers</a> and <a href="http://www.google.com/webfonts/specimen/Inconsolata">source code</a> fonts by google fonts
                </div>
                <div class="social">
                        <a href="http://twitter.com/XXXXXX"><i class="icon-twitter"></i>  </a>
                        <a href="http://www.linkedin.com/in/XXXXXXX"><i class="icon-linkedin"></i>  </a>
                        <a href="https://github.com/dephiros"><i class="icon-github"></i>  </a>
                        <a href="mailto:dephiros@gmail.com"><i class="icon-envelope"></i> </a>
                </div>
            </footer><!-- /#contentinfo -->
        </div>
        <!--Add statistycs-->

<script type="text/javascript">
  var GoSquared = {};
  GoSquared.acct = "XXX-YYYYYY-X";
  (function(w){
    function gs(){
      w._gstc_lt = +new Date;
      var d = document, g = d.createElement("script");
      g.type = "text/javascript";
      g.src = "//d1l6p2sc9645hc.cloudfront.net/tracker.js";
      var s = d.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(g, s);
    }
    w.addEventListener ?
      w.addEventListener("load", gs, false) :
      w.attachEvent("onload", gs);
  })(window);
</script>
</body>
</html>